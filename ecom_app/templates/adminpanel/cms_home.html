{% extends 'adminpanel/base.html' %}
{% load static %}

{% block content %}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-body">

                            <div class="title-header option-title">
                                <h5>Home Page Management</h5>
                            </div>

                            <!-- NAV TABS -->
                            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-sliders-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-sliders" type="button">
                                        Sliders
                                    </button>
                                </li>

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-banner-tab" data-bs-toggle="pill"
                                        data-bs-target="#banner" type="button">
                                        Center Banner
                                    </button>
                                </li>

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-video-tab" data-bs-toggle="pill"
                                        data-bs-target="#video" type="button">
                                        Video
                                    </button>
                                </li>

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-endbanner-tab" data-bs-toggle="pill"
                                        data-bs-target="#endbanner" type="button">
                                        End Banner
                                    </button>
                                </li>

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-flashnews-tab" data-bs-toggle="pill"
                                        data-bs-target="#flashnews" type="button">
                                        Flash News
                                    </button>
                                </li>

                            </ul>

                            <!-- TAB CONTENT -->
                            <div class="tab-content" id="pills-tabContent">

                                <!-- SLIDERS -->
                                <div class="tab-pane fade show active" id="pills-sliders" role="tabpanel"
                                    aria-labelledby="pills-sliders-tab">
                                        <form class="theme-form theme-form-2 mega-form"
                                            method="POST"
                                            enctype="multipart/form-data"
                                            action="{% if edit_slider %}{% url 'web:edit_slider' edit_slider.id %}{% else %}{% url 'web:add_slider' %}{% endif %}">
                                            {% csrf_token %}

                                        <div class="card-header-1">
                                            <h5>Slider Management</h5>
                                        </div>

                                        <div class="row">

                                            <!-- SLIDER IMAGE -->
                                            <div class="mb-4 row align-items-center">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">Slider</label>
                                                <div class="col-md-9 col-lg-10">
                                                   <input class="form-control"
                                                                type="file"
                                                                name="slider_image"
                                                                accept="image/*"
                                                                onchange="previewImage(this, 'preview1', 500, 1344, 768)">

                                                            {% if edit_slider %}
                                                                <img id="preview1"
                                                                    src="{{ edit_slider.image.url }}"
                                                                    class="mt-2"
                                                                    style="max-height:120px; border-radius:10px;">
                                                            {% else %}
                                                                <img id="preview1"
                                                                    class="mt-2"
                                                                    style="max-height:120px; display:none; border-radius:10px;">
                                                            {% endif %}
                                                             <small class="text-muted">
                                                                Allowed formats: WebP, JPG, PNG | Ideal size: 200–500 KB | Max size: 1 MB | Dimension: 1344 × 768 px
                                                            </small>
                                                </div>
                                            </div>

                                          
                                            <!-- ACTION BUTTONS -->
                                            <div class="row mt-3">
                                                <div class="col-lg-2 col-md-3"></div>

                                                <div class="col-md-9 col-lg-10 d-flex justify-content-between">
                                                   

                                                   <button type="submit" class="btn btn-solid btn-success">
                                                        {% if edit_slider %}Update Slider{% else %}Save Slider{% endif %}
                                                    </button>

                                                </div>
                                            </div>

                                        </div>
                                        </form>

                                    <div class="card-header-1">
                                        <h5>Banners</h5>
                                    </div>

                                    <div class="table-responsive">
                                        <table class="table all-package order-table theme-table" id="table_id">
                                            <thead>
                                                <tr>
                                                    <th>Banner id</th>
                                                    <th>Banner</th>
                                                    <th>created at</th>
                                                    
                                                    <th>Option</th>
                                                </tr>
                                            </thead>
                                                                                        <tbody>
                                                {% for slider in sliders %}
                                                <tr>
                                                    <td>{{ slider.id }}</td>
                                                    <td>
                                                        <img src="{{ slider.image.url }}" class="img-fluid" style="height:60px;">
                                                    </td>
                                                    <td>{{ slider.created_at|date:"d-m-Y" }}</td>
                                                    <td>
                                                       <a href="{% url 'web:edit_slider' slider.id %}?tab=pills-sliders">
                                                            <i class="ri-pencil-line"></i>
                                                        </a>


                                                        <a href="{% url 'web:delete_slider' slider.id %}"
                                                        onclick="return confirm('Delete this slider?')">
                                                            <i class="ri-delete-bin-line"></i>
                                                        </a>

                                                    </td>
                                                </tr>
                                                {% empty %}
                                                <tr>
                                                    <td colspan="4">No sliders uploaded</td>
                                                </tr>
                                                {% endfor %}
                                                </tbody>

                                        </table>
                                    </div>
                                </div>

                                <!-- CENTER BANNER -->
                                <div class="tab-pane fade" id="banner" role="tabpanel"
                                    aria-labelledby="pills-banner-tab">

                                    <form class="theme-form theme-form-2 mega-form"
                                        method="POST"
                                        enctype="multipart/form-data"
                                        action="{% url 'web:center_banner' %}">
                                        {% csrf_token %}
                                        <div class="card-header-1 mt-3">
                                            <h5>Center Banner</h5>
                                        </div>

                                        <!-- BANNER 1 -->
                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-lg-2 col-md-3 mb-0">Banner 1</label>
                                            <div class="col-md-9 col-lg-10">
                                                <!-- BANNER 1 -->
                                                    <input type="file"
                                                        class="form-control"
                                                        name="banner1"
                                                        accept="image/*"
                                                        onchange="validateBanner(this, 'preview_cb1', 917, 515)">

                                                    {% if center_banner.banner1 %}
                                                        <img id="preview_cb1"
                                                            src="{{ center_banner.banner1.url }}"
                                                            class="mt-2"
                                                            style="max-height:120px; border-radius:10px;">

                                                        <a href="{% url 'web:delete_center_banner' 'banner1' %}"
                                                        class="text-danger d-block mt-1"
                                                        onclick="return confirm('Delete Banner 1?')">
                                                            Delete
                                                        </a>
                                                    {% else %}
                                                        <img id="preview_cb1"
                                                            class="mt-2"
                                                            style="max-height:120px; display:none; border-radius:10px;">
                                                    {% endif %}


                                                <small class="text-muted">
                                                    Size: 917 × 515 px | Max file size: 1 MB
                                                </small>
                                            </div>
                                        </div>

                                        <!-- BANNER 2 -->
                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-lg-2 col-md-3 mb-0">Banner 2</label>
                                            <div class="col-md-9 col-lg-10">
                                                <input type="file"
                                                    class="form-control"
                                                    name="banner2"
                                                    accept="image/*"
                                                    onchange="validateBanner(this, 'preview_cb2', 917, 515)">

                                                {% if center_banner.banner2 %}
                                                    <img id="preview_cb2"
                                                        src="{{ center_banner.banner2.url }}"
                                                        class="mt-2"
                                                        style="max-height:120px; border-radius:10px;">

                                                    <a href="{% url 'web:delete_center_banner' 'banner2' %}"
                                                    class="text-danger d-block mt-1"
                                                    onclick="return confirm('Delete Banner 2?')">
                                                        Delete
                                                    </a>
                                                {% else %}
                                                    <img id="preview_cb2"
                                                        class="mt-2"
                                                        style="max-height:120px; display:none; border-radius:10px;">
                                                {% endif %}
                                                <small class="text-muted">
                                                    Size: 917 × 515 px | Max file size: 1 MB
                                                </small>
                                            </div>
                                        </div>

                                        <!-- BANNER 3 -->
                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-lg-2 col-md-3 mb-0">Banner 3</label>
                                            <div class="col-md-9 col-lg-10">
                                                <input type="file"
                                                    class="form-control"
                                                    name="banner3"
                                                    accept="image/*"
                                                    onchange="validateBanner(this, 'preview_cb3', 917, 1222)">

                                                {% if center_banner.banner3 %}
                                                    <img id="preview_cb3"
                                                        src="{{ center_banner.banner3.url }}"
                                                        class="mt-2"
                                                        style="max-height:120px; border-radius:10px;">

                                                    <a href="{% url 'web:delete_center_banner' 'banner3' %}"
                                                    class="text-danger d-block mt-1"
                                                    onclick="return confirm('Delete Banner 3?')">
                                                        Delete
                                                    </a>
                                                {% else %}
                                                    <img id="preview_cb3"
                                                        class="mt-2"
                                                        style="max-height:120px; display:none; border-radius:10px;">
                                                {% endif %}

                                                <small class="text-muted">
                                                    Size: 917 × 1222 px | Max file size: 1 MB
                                                </small>
                                            </div>
                                        </div>

                                         <!-- SUBMIT BUTTON -->
                                            <div class="row">
                                                <div class="col-lg-2 col-md-3"></div>
                                                <div class="col-md-9 col-lg-10 d-flex justify-content-end">
                                                    <button type="submit"
                                                            name="center_banner_submit"
                                                            class="btn btn-solid btn-success">
                                                        Save
                                                    </button>

                                                </div>
                                            </div>
                                    </form> 

                                </div>

                                
                                <!-- VIDEO TAB -->
                                            <div class="tab-pane fade" id="video" role="tabpanel">

                                            <form class="theme-form theme-form-2 mega-form"
                                                method="POST"
                                                enctype="multipart/form-data"
                                                action="{% url 'web:home_video' %}">
                                            {% csrf_token %}

                                            <div class="card-header-1 mt-3">
                                                <h5>Home Page Video</h5>
                                            </div>

                                            <!-- THUMBNAIL -->
                                           <div class="mb-4 row align-items-center">
                                                        <label class="form-label-title col-lg-2 col-md-3 mb-0">
                                                            Video Thumbnail
                                                        </label>
                                                        <div class="col-md-9 col-lg-10">

                                                            <input type="file"
                                                                class="form-control"
                                                                name="thumbnail"
                                                                accept="image/*"
                                                                onchange="previewImage(this, 'thumbPreview', 500)">

                                                            <img id="thumbPreview"
                                                                {% if home_video.thumbnail %}
                                                                    src="{{ home_video.thumbnail.url }}"
                                                                    style="height:120px; border-radius:10px;"
                                                                {% else %}
                                                                    style="height:120px; display:none; border-radius:10px;"
                                                                {% endif %}
                                                                class="mt-2">

                                                            {% if home_video.thumbnail %}
                                                                <a href="{% url 'web:delete_home_video_file' 'thumbnail' %}"
                                                                class="text-danger d-block mt-1"
                                                                onclick="return confirm('Delete thumbnail?')">
                                                                    Delete
                                                                </a>
                                                            {% endif %}

                                                        </div>
                                                    </div>


                                            <!-- VIDEO FILE -->
                                          <div class="mb-4 row align-items-center">
                                                        <label class="form-label-title col-lg-2 col-md-3 mb-0">
                                                            Video File
                                                        </label>
                                                        <div class="col-md-9 col-lg-10">

                                                            <input type="file"
                                                                class="form-control"
                                                                name="video_file"
                                                                accept="video/mp4,video/webm"
                                                                onchange="previewVideo(this)">

                                                            <video id="videoPreview"
                                                                controls
                                                                {% if home_video.video_file %}
                                                                    src="{{ home_video.video_file.url }}"
                                                                    style="height:120px; width:220px; border-radius:10px; background:#000;"
                                                                {% else %}
                                                                    style="height:120px; width:220px; display:none; border-radius:10px; background:#000;"
                                                                {% endif %}
                                                                class="mt-2">
                                                            </video>

                                                            <!-- {% if home_video.video_file %}
                                                                <a href="{% url 'web:delete_home_video_file' 'video' %}"
                                                                class="text-danger d-block mt-1"
                                                                onclick="return confirm('Delete video?')">
                                                                    Delete
                                                                </a>
                                                            {% endif %} -->

                                                        </div>
                                                    </div>


                                            <!-- SAVE -->
                                            <div class="row mt-4">
                                                <div class="col-lg-2 col-md-3"></div>
                                                <div class="col-md-9 col-lg-10 d-flex justify-content-end">
                                                    <button type="submit" class="btn btn-solid btn-success">
                                                        Save Video
                                                    </button>
                                                </div>
                                            </div>

                                            </form>
                                            </div>


                                
                                            <!-- END BANNER -->
                                            <div class="tab-pane fade" id="endbanner" role="tabpanel">

                                                <form class="theme-form theme-form-2 mega-form"
                                                    method="POST"
                                                    enctype="multipart/form-data"
                                                    action="{% if edit_end_banner %}
                                                                {% url 'web:edit_end_banner' edit_end_banner.id %}
                                                            {% else %}
                                                                {% url 'web:add_end_banner' %}
                                                            {% endif %}">
                                                {% csrf_token %}

                                                <div class="card-header-1 mt-3">
                                                    <h5>End Banner</h5>
                                                </div>

                                                <!-- MULTI UPLOAD -->
                                                <div class="mb-4 row align-items-center">
                                                    <label class="form-label-title col-lg-2 col-md-3 mb-0">Banners</label>
                                                    <div class="col-md-9 col-lg-10">

                                                        {% if edit_end_banner %}
                                                            <input class="form-control"
                                                                type="file"
                                                                name="end_banner_image"
                                                                accept="image/*"
                                                                onchange="previewImage(this, 'end_preview1', 500, 1536, 672)">

                                                            <img id="end_preview1"
                                                                src="{{ edit_end_banner.image.url }}"
                                                                class="mt-2"
                                                                style="max-height:120px; border-radius:10px;">
                                                        {% else %}
                                                            <input class="form-control"
                                                                type="file"
                                                                name="end_banner_images"
                                                                accept="image/*"
                                                                multiple
                                                                onchange="previewMultipleEndBanners(this)">
                                                        {% endif %}

                                                        <div id="end-preview-wrapper" class="d-flex gap-2 flex-wrap mt-2"></div>

                                                        <small class="text-muted">
                                                            Dimension: 1536 × 672 px | Max 1 MB each
                                                        </small>
                                                    </div>
                                                </div>

                                                <!-- SAVE -->
                                                <div class="row mt-3">
                                                    <div class="col-lg-2 col-md-3"></div>
                                                    <div class="col-md-9 col-lg-10 d-flex justify-content-end">
                                                        <button type="submit" class="btn btn-solid btn-success">
                                                            {% if edit_end_banner %}Update Banner{% else %}Save Banners{% endif %}
                                                        </button>
                                                    </div>
                                                </div>

                                                </form>


                                                <!-- LIST -->
                                                <div class="card-header-1 mt-4">
                                                    <h5>Banners</h5>
                                                </div>

                                                <div class="table-responsive">
                                                    <table class="table all-package order-table theme-table">
                                                        <thead>
                                                            <tr>
                                                                <th>ID</th>
                                                                <th>Banner</th>
                                                                <th>Created</th>
                                                                <th>Option</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {% for banner in end_banners %}
                                                            <tr>
                                                                <td>{{ banner.id }}</td>
                                                                <td>
                                                                    <img src="{{ banner.image.url }}"
                                                                        style="height:60px; border-radius:6px;">
                                                                </td>
                                                                <td>{{ banner.created_at|date:"d-m-Y" }}</td>
                                                                <td>
                                                                   <a href="{% url 'web:edit_end_banner' banner.id %}?tab=endbanner">
                                                                            <i class="ri-pencil-line"></i>
                                                                        </a>

                                                                    <a href="{% url 'web:delete_end_banner' banner.id %}"
                                                                    onclick="return confirm('Delete this banner?')">
                                                                        <i class="ri-delete-bin-line"></i>
                                                                    </a>
                                                                </td>
                                                            </tr>
                                                            {% empty %}
                                                            <tr>
                                                                <td colspan="4">No end banners added</td>
                                                            </tr>
                                                            {% endfor %}
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>


                                <!-- FLASH NEWS -->
                                <div class="tab-pane fade" id="flashnews" role="tabpanel"
                                    aria-labelledby="pills-flashnews-tab">

                                 

                                  <form class="theme-form theme-form-2 mega-form"
                                        method="POST"
                                        action="{% if edit_flash_news %}
                                                    {% url 'web:edit_flash_news' edit_flash_news.id %}
                                                {% else %}
                                                    {% url 'web:add_flash_news' %}
                                                {% endif %}">
                                    {% csrf_token %}


                                    <div class="card-header-1 mt-3">
                                        <h5>Flash News</h5>
                                    </div>

                                    
                                    <div id="flash-news-wrapper">

                                        <!-- FLASH NEWS  -->
                                        <div class="mb-4 row align-items-center flash-news-item">
                                            <label class="form-label-title col-lg-2 col-md-3 mb-0">
                                                Flash News 
                                            </label>
                                            <div class="col-md-9 col-lg-10 d-flex gap-2">
                                                <input type="text"
                                                    class="form-control"
                                                    name="flash_news[]"
                                                    maxlength="150"
                                                    placeholder="Enter flash news text"
                                                    value="{% if edit_flash_news %}{{ edit_flash_news.text }}{% endif %}">

                                            </div>
                                        </div>

                                    </div>

                                    <!-- ACTION BUTTONS -->
                                    <div class="row">
                                        <div class="col-lg-2 col-md-3"></div>
                                        <div class="col-md-9 col-lg-10 d-flex justify-content-between">
                                          

                                           <button type="submit" class="btn btn-solid btn-success">
                                                {% if edit_flash_news %}
                                                    Update Flash News
                                                {% else %}
                                                    Save Flash News
                                                {% endif %}
                                            </button>

                                        </div>
                                    </div>
                                </form>

                                <div class="card-header-1">
                                        <h5>FlashNews</h5>
                                    </div>

                                    <div class="table-responsive">
                                        <table class="table all-package order-table theme-table" id="table_id">
                                            <thead>
                                                <tr>
                                                    <th>Counter</th>
                                                    <th>News</th>
                                                    <th>created at</th>
                                                    
                                                    <th>Option</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for news in flash_news %}
                                                <tr>
                                                    <td>{{ forloop.counter }}</td>
                                                    <td>{{ news.text }}</td>
                                                    <td>{{ news.created_at|date:"d-m-Y" }}</td>
                                                    <td>
                                                        <!-- EDIT -->
                                                        <a href="{% url 'web:edit_flash_news' news.id %}?tab=flashnews">
                                                            <i class="ri-pencil-line"></i>
                                                        </a>


                                                        <!-- DELETE -->
                                                        <a href="{% url 'web:delete_flash_news' news.id %}"
                                                        onclick="return confirm('Delete this flash news?')">
                                                            <i class="ri-delete-bin-line"></i>
                                                        </a>
                                                    </td>

                                                </tr>
                                                {% empty %}
                                                <tr>
                                                    <td colspan="4">No flash news added</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>


                                        </table>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


{% block extra_js %}
<!-- Dropzone js -->
<script src="{% static 'adminpanel/js/dropzone/dropzone.js' %}"></script>
<script src="{% static 'adminpanel/js/dropzone/dropzone-script.js' %}"></script>

<!-- Select2 js -->
<script src="{% static 'adminpanel/js/select2.min.js' %}"></script>
<script src="{% static 'adminpanel/js/select2-custom.js' %}"></script>
<script>
/* ---------- IMAGE PREVIEW + SIZE CHECK ---------- */
function previewImage(input, previewId, maxSizeKB = 500, reqWidth = null, reqHeight = null) {
    const file = input.files[0];
    if (!file) return;

    // Size validation
    const sizeKB = file.size / 1024;
    if (sizeKB > maxSizeKB) {
        alert(`File size must be less than ${maxSizeKB} KB`);
        input.value = "";
        return;
    }

    const reader = new FileReader();
    reader.onload = function (e) {
        const img = new Image();
        img.src = e.target.result;

        img.onload = function () {
            // Dimension validation (if provided)
            if (reqWidth && reqHeight) {
                if (img.width !== reqWidth || img.height !== reqHeight) {
                    alert(`Image dimension must be ${reqWidth} x ${reqHeight}px`);
                    input.value = "";
                    return;
                }
            }

            const preview = document.getElementById(previewId);
            preview.src = e.target.result;
            preview.style.display = "block";
        };
    };
    reader.readAsDataURL(file);
}
</script>




<script>
let bannerCount = 3;

function addBannerInput() {
    bannerCount++;

    const container = document.getElementById("extra-banners");

    const div = document.createElement("div");
    div.className = "mb-4 row align-items-center";

    const previewId = `preview_dynamic_${bannerCount}`;

    div.innerHTML = `
        <label class="form-label-title col-lg-2 col-md-3 mb-0">
            Slider ${bannerCount}
        </label>
        <div class="col-md-9 col-lg-10">
            <input class="form-control" type="file" accept="image/*"
                onchange="previewImage(this, '${previewId}', 500)">
            <img id="${previewId}" class="mt-2"
                style="max-height:120px; display:none; border-radius:10px;">
        </div>
    `;

    container.appendChild(div);
}
</script>


<script>
function validateBanner(input, previewId, width, height) {
    previewImage(input, previewId, 500, width, height);
}
</script>

<script>
let flashCount = 1;

function addFlashNews() {
    flashCount++;

    const wrapper = document.getElementById("flash-news-wrapper");

    const div = document.createElement("div");
    div.className = "mb-4 row align-items-center flash-news-item";

    div.innerHTML = `
        <label class="form-label-title col-lg-2 col-md-3 mb-0">
            Flash News ${flashCount}
        </label>
        <div class="col-md-9 col-lg-10">
            <input type="text"
                class="form-control"
                name="flash_news[]"
                maxlength="150"
                placeholder="Enter flash news text">
        </div>
    `;

    wrapper.appendChild(div);
}
</script>



<script>
let endBannerCount = 3;

function addEndBannerInput() {
    endBannerCount++;

    const container = document.getElementById("end-extra-banners");
    const previewId = `end_preview_dynamic_${endBannerCount}`;

    const div = document.createElement("div");
    div.className = "mb-4 row align-items-center";

    div.innerHTML = `
        <label class="form-label-title col-lg-2 col-md-3 mb-0">
            Slider ${endBannerCount}
        </label>
        <div class="col-md-9 col-lg-10">
            <input class="form-control" type="file" accept="image/*"
                onchange="previewImage(this, '${previewId}', 500)">
            <img id="${previewId}" class="mt-2"
                style="max-height:120px; display:none; border-radius:10px;">
        </div>
    `;

    container.appendChild(div);
}
</script>
<script>
/* ---------- VIDEO PREVIEW (ISOLATED, NO SIDE EFFECTS) ---------- */
function previewVideo(input) {
    const file = input.files[0];
    if (!file) return;

    // Size check (video only)
    const sizeMB = file.size / (1024 * 1024);
    if (sizeMB > 10) {
        alert("Video must be less than 10 MB");
        input.value = "";
        return;
    }

    const video = document.getElementById("videoPreview");
    if (!video) return;

    // IMPORTANT: do NOT touch image preview logic
    video.src = URL.createObjectURL(file);
    video.style.display = "block";
    video.load();
}
</script>


<script>
function previewMultipleEndBanners(input) {
    const wrapper = document.getElementById("end-preview-wrapper");
    wrapper.innerHTML = "";

    Array.from(input.files).forEach(file => {
        if (file.size / 1024 > 1000) {
            alert("Each image must be under 1 MB");
            input.value = "";
            wrapper.innerHTML = "";
            return;
        }

        const reader = new FileReader();
        reader.onload = e => {
            const img = document.createElement("img");
            img.src = e.target.result;
            img.style.height = "120px";
            img.style.borderRadius = "10px";
            wrapper.appendChild(img);
        };
        reader.readAsDataURL(file);
    });
}
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const params = new URLSearchParams(window.location.search);
    const tab = params.get("tab");

    if (!tab) return;

    // Remove active classes from all tabs
    document.querySelectorAll(".nav-link").forEach(btn => {
        btn.classList.remove("active");
    });

    document.querySelectorAll(".tab-pane").forEach(pane => {
        pane.classList.remove("show", "active");
    });

    // Activate correct tab button
    const trigger = document.querySelector(`[data-bs-target="#${tab}"]`);
    const pane = document.getElementById(tab);

    if (trigger && pane) {
        trigger.classList.add("active");
        pane.classList.add("show", "active");
    }
});
</script>




{% endblock %}


<!-- New Product Add End -->
{% endblock %}