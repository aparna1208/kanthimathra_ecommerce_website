{% extends 'adminpanel/base.html' %}
{% load static %}

{% block content %}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-body">

                            <div class="title-header option-title">
                                <h5>Home Page Management</h5>
                            </div>

                            <!-- NAV TABS -->
                            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="pills-sliders-tab" data-bs-toggle="pill"
                                        data-bs-target="#pills-sliders" type="button">
                                        Sliders
                                    </button>
                                </li>

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-banner-tab" data-bs-toggle="pill"
                                        data-bs-target="#banner" type="button">
                                        Center Banner
                                    </button>
                                </li>

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-video-tab" data-bs-toggle="pill"
                                        data-bs-target="#video" type="button">
                                        Video
                                    </button>
                                </li>

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-endbanner-tab" data-bs-toggle="pill"
                                        data-bs-target="#endbanner" type="button">
                                        End Banner
                                    </button>
                                </li>

                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pills-flashnews-tab" data-bs-toggle="pill"
                                        data-bs-target="#flashnews" type="button">
                                        Flash News
                                    </button>
                                </li>

                            </ul>

                            <!-- TAB CONTENT -->
                            <div class="tab-content" id="pills-tabContent">

                                <!-- SLIDERS -->
                                <div class="tab-pane fade show active" id="pills-sliders" role="tabpanel"
                                    aria-labelledby="pills-sliders-tab">
                                        <form method="POST" class="theme-form theme-form-2 mega-form" enctype="multipart/form-data"  action="" >
                                        {% csrf_token %}
                                        <input type="hidden" name="form_type" value="sliders">
                                        <div class="card-header-1">
                                            <h5>Slider Management</h5>
                                        </div>

                                        <div class="row">

                                            <!-- SLIDER 1 -->
                                            <div class="mb-4 row align-items-center">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">Slider 1</label>
                                                <div class="col-md-9 col-lg-10">
                                                    <input class="form-control" type="file" accept="image/*" name="sliders"
                                                            onchange="previewImage(this, 'preview1')">
                                                           


                                                    <img id="preview1" class="mt-2"
                                                            style="max-height:120px; display:none; border-radius:10px;">

                                                             <small class="text-muted">
                                                                Allowed formats: WebP, JPG, PNG | Ideal size: 200–500 KB | Max size: 1 MB | Dimension: 1344 × 768 px
                                                            </small>
                                                </div>
                                            </div>

                                            <!-- SLIDER 2 -->
                                            <div class="mb-4 row align-items-center">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">Slider 2</label>
                                                <div class="col-md-9 col-lg-10">
                                                    <input class="form-control" type="file" accept="image/*" name="sliders"
                                                            onchange="previewImage(this, 'preview2')">
                                                            

                                                    <img id="preview2" class="mt-2"
                                                            style="max-height:120px; display:none; border-radius:10px;">
                                                            <small class="text-muted">
                                                                Allowed formats: WebP, JPG, PNG | Ideal size: 200–500 KB | Max size: 1 MB | Dimension: 1344 × 768 px
                                                            </small>
                                                </div>
                                            </div>

                                            <!-- SLIDER 3 -->
                                            <div class="mb-4 row align-items-center">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">Slider 3</label>
                                                <div class="col-md-9 col-lg-10">
                                                    <input class="form-control" type="file" accept="image/*"  name="sliders"
                                                            onchange="previewImage(this, 'preview3')">
                                                            
                                                    <img id="preview3" class="mt-2"
                                                            style="max-height:120px; display:none; border-radius:10px;">
                                                            <small class="text-muted">
                                                                Allowed formats: WebP, JPG, PNG | Ideal size: 200–500 KB | Max size: 1 MB | Dimension: 1344 × 768 px
                                                            </small>

                                                </div>
                                            </div>

                                            <!-- DYNAMIC SLIDERS (will appear BELOW Slider 3) -->
                                            <div id="extra-banners" class="col-12"></div>

                                            <!-- ACTION BUTTONS -->
                                            <div class="row mt-3">
                                                <div class="col-lg-2 col-md-3"></div>

                                                <div class="col-md-9 col-lg-10 d-flex justify-content-between">
                                                    <button type="button"
                                                            class="btn btn-outline-primary"
                                                            onclick="addBannerInput()">
                                                        + Add More Banner
                                                    </button>

                                                    <button type="submit"
                                                            class="btn btn-solid btn-success">
                                                        Save Sliders
                                                    </button>
                                                </div>
                                            </div>

                                        </div>
                                        </form>

                                    <div class="card-header-1">
                                        <h5>Banners</h5>
                                    </div>

                                    <div class="table-responsive">
                                        <table class="table all-package order-table theme-table" id="table_id">
                                            <thead>
                                                <tr>
                                                    <th>Banner</th>
                                                    <th>created at</th>
                                                    
                                                    <th>Option</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                               {% for banner in sliders %}
                                                <tr>
                                                   <td>
                                                        <div class="table-image">
                                                                <img src="{{banner.image.url}}" class="img-fluid" alt="Banner" style="height:70px; width:auto;">
                                                        </div>
                                                        </td>
                                                        <td>{{ banner.created_at|date:"d-m-Y" }}</td>
                                                  <td>
                                                            <ul>
                                                          

                                                                <li>
                                                                    <a href="javascript:void(0)">
                                                                        <i class="ri-pencil-line"></i>
                                                                    </a>
                                                                </li>

                                                                <li>
                                                                    <a href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#deleteSliderModal{{ banner.id }}">
                                                                        <i class="ri-delete-bin-line"></i>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                            <!-- delete modal -->
                                                            <div class="modal fade theme-modal remove-coupon" id="deleteSliderModal{{ banner.id }}" aria-hidden="true" tabindex="-1">
                                                                <div class="modal-dialog modal-dialog-centered">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header d-block text-center">
                                                                            <h5 class="modal-title w-100">Are You Sure ?</h5>
                                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <p>Do you really want to delete this banner"?</p>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-animation btn-md fw-bold" data-bs-dismiss="modal">No</button>
                                                                            <form method="post" action="{% url 'web:delete_slider' banner.id %}">
                                                                                {% csrf_token %}
                                                                                <button type="submit" class="btn btn-animation btn-md fw-bold">Yes</button>
                                                                            </form>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                </tr>
                                               {% empty %}
                                                <tr>
                                                <td colspan="3" class="text-center text-muted">
                                                No banners uploaded yet
                                                </td>
                                                </tr>
                                                {% endfor %}
                                                                                                
                                            </tbody>
                                        </table>
                                    </div>
                                </div>




                                <!-- CENTER BANNER -->
                                <div class="tab-pane fade" id="banner" role="tabpanel"
                                    aria-labelledby="pills-banner-tab">

                                    <form method="POST" action="" class="theme-form theme-form-2 mega-form" enctype="multipart/form-data">
                                        {% csrf_token %}
                                         <input type="hidden" name="form_type" value="center_banner">

                                        <div class="card-header-1 mt-3">
                                            <h5>Center Banner</h5>
                                        </div>
                                        <!-- BANNER 1 -->
                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-lg-2 col-md-3 mb-0">Banner 1</label>
                                            <div class="col-md-9 col-lg-10">
                                                <input type="file" class="form-control" accept="image/*" name="banner1"
                                                    onchange="validateBanner(this, 'preview_cb1', 917, 515)">
                                                <img id="preview_cb1" class="mt-2"
                                                    style="max-height:120px; display:none; border-radius:10px;">
                                                <small class="text-muted">
                                                    Size: 917 × 515 px | Max file size: 1 MB
                                                </small>
                                            </div>
                                        </div>

                                        <!-- BANNER 2 -->
                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-lg-2 col-md-3 mb-0">Banner 2</label>
                                            <div class="col-md-9 col-lg-10">
                                                <input type="file" class="form-control" accept="image/*" name="banner2"
                                                    onchange="validateBanner(this, 'preview_cb2', 917, 515)">
                                                <img id="preview_cb2" class="mt-2"
                                                    style="max-height:120px; display:none; border-radius:10px;">
                                                <small class="text-muted">
                                                    Size: 917 × 515 px | Max file size: 1 MB
                                                </small>
                                            </div>
                                        </div>

                                        <!-- BANNER 3 -->
                                        <div class="mb-4 row align-items-center">
                                            <label class="form-label-title col-lg-2 col-md-3 mb-0">Banner 3</label>
                                            <div class="col-md-9 col-lg-10">
                                                <input type="file" class="form-control" accept="image/*" name="banner3"
                                                    onchange="validateBanner(this, 'preview_cb3', 917, 1222)">
                                                <img id="preview_cb3" class="mt-2"
                                                    style="max-height:120px; display:none; border-radius:10px;">
                                                <small class="text-muted">
                                                    Size: 917 × 1222 px | Max file size: 1 MB
                                                </small>
                                            </div>
                                        </div>

                                         <!-- SUBMIT BUTTON -->
                                            <div class="row">
                                                <div class="col-lg-2 col-md-3"></div>
                                                <div class="col-md-9 col-lg-10 d-flex justify-content-end">
                                                    <button type="submit" class="btn btn-solid btn-success">
                                                         Save Center Banner
                                                    </button>
                                                </div>
                                            </div>
                                    </form> 


                                    <!-- Center Banners table -->
                                    <div class="card-header-1">
                                        <h5>Center Banners</h5>
                                    </div>

                                    <div class="table-responsive">
                                        <table class="table all-package order-table theme-table" id="table_id">
                                            <thead>
                                                <tr>
                                                    <th>Image</th>
                                                                                                       
                                                    <th>Banner</th>
                                                    <th>created at</th>
                                                    <th>Option</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% if center_banner.banner1 %}
                                                <tr>
                                                    <td>
                                                        <div class="table-image">
                                                            <img src="{{ center_banner.banner1.url }}" class="img-fluid"
                                                                style="height:70px; width:auto;" alt="Banner 1">
                                                        </div>
                                                    </td>
                                                    
                                                    <td>
                                                        <span class="badge bg-primary">Banner 1</span>
                                                    </td>
                                                    <td>{{ center_banner.updated_at|date:"d-m-Y" }}</td>
                                                    
                                                </tr>
                                                {% endif %}

                                                {% if center_banner.banner2 %}
                                                <tr>
                                                    <td>
                                                        <div class="table-image">
                                                            <img src="{{ center_banner.banner2.url }}" class="img-fluid"
                                                                style="height:70px; width:auto;" alt="Banner 2">
                                                        </div>
                                                    </td>
                                                
                                                    <td>
                                                        <span class="badge bg-primary">Banner 2</span>
                                                    </td>
                                                    <td>{{ center_banner.updated_at|date:"d-m-Y" }}</td>
                                                </tr>
                                                {% endif %}

                                                {% if center_banner.banner3 %}
                                                <tr>
                                                    <td>
                                                        <div class="table-image">
                                                            <img src="{{ center_banner.banner3.url }}" class="img-fluid"
                                                                style="height:70px; width:auto;" alt="Banner 3">
                                                        </div>
                                                    </td>
                                                    
                                                    <td>
                                                        <span class="badge bg-primary">Banner 3</span>
                                                    </td>
                                                    <td>{{ center_banner.updated_at|date:"d-m-Y" }}</td>
                                                </tr>
                                                {% endif %}

                                                {% if not center_banner.banner1 and not center_banner.banner2 and not center_banner.banner3 %}
                                                <tr>
                                                    <td colspan="3" class="text-center text-muted">
                                                        No Center Banners uploaded yet
                                                    </td>
                                                </tr>
                                                {% endif %}
                                            </tbody>
                                        </table>
                                    </div>

                                </div>

                                <!-- VIDEO / ORDERS -->
                                <div class="tab-pane fade" id="video" role="tabpanel" aria-labelledby="pills-video-tab">

                                    

                                        <form  method="POST" action="" class="theme-form theme-form-2 mega-form" enctype="multipart/form-data">
                                            {% csrf_token %}
                                             <input type="hidden" name="form_type" value="video">
                                            <div class="card-header-1 mt-3">
                                                <h5>Home Page Video</h5>
                                            </div>
                                            <div class="mb-4 row align-items-center">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">Video Thumbnail</label>
                                                <div class="col-md-9 col-lg-10">
                                                    <input class="form-control" type="file" accept="image/*"  name="video_thumbnail"
                                                            onchange="previewImage(this, 'preview3')">
                                                            
                                                    <img id="preview3" class="mt-2"
                                                            style="max-height:120px; display:none; border-radius:10px;">
                                                            <small class="text-muted">
                                                                Allowed formats: WebP, JPG, PNG | Ideal size: 200–500 KB | Max size: 1 MB | Dimension: 1344 × 768 px
                                                            </small>

                                                </div>
                                            </div>
                                            
                                            <!-- VIDEO TYPE OPTION -->
                                            <div class="mb-4 row align-items-center">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">
                                                    Video Type
                                                </label>
                                                <div class="col-md-9 col-lg-10">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input"
                                                            type="radio"
                                                            name="video_type"
                                                            id="video_upload"
                                                            value="upload"
                                                            checked
                                                            onclick="toggleVideoType()">
                                                        <label class="form-check-label" for="video_upload">
                                                            Upload Video
                                                        </label>
                                                    </div>

                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input"
                                                            type="radio"
                                                            name="video_type"
                                                            id="video_youtube"
                                                            value="youtube"
                                                            onclick="toggleVideoType()">
                                                        <label class="form-check-label" for="video_youtube">
                                                            YouTube URL
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- UPLOAD VIDEO -->
                                            <div class="mb-4 row align-items-center" id="uploadVideoBox">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">
                                                    Upload Video
                                                </label>
                                                <div class="col-md-9 col-lg-10">
                                                    <input type="file"
                                                        class="form-control"
                                                        name="video_file"
                                                        accept="video/mp4,video/webm"
                                                        onchange="validateVideo(this, 'videoPreview')">

                                                    <video id="videoPreview"
                                                        class="mt-3"
                                                        style="max-width:100%; display:none; border-radius:10px;"
                                                        controls>
                                                    </video>

                                                    <small class="text-muted">
                                                        Formats: MP4, WebM | Ideal: &lt; 3 MB | Max: 10 MB
                                                    </small>
                                                </div>
                                            </div>


                                            <!-- YOUTUBE VIDEO -->
                                            <div class="mb-4 row align-items-center d-none" id="youtubeVideoBox">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">
                                                    YouTube URL
                                                </label>
                                                <div class="col-md-9 col-lg-10">
                                                    <input type="url"
                                                        class="form-control"
                                                        name="youtube_url"
                                                        placeholder="https://www.youtube.com/watch?v=XXXXX"
                                                        oninput="previewYoutube(this.value)">

                                                    <iframe id="youtubePreview"
                                                            class="mt-3"
                                                            width="100%"
                                                            height="315"
                                                            style="display:none; border-radius:10px;"
                                                            frameborder="0"
                                                            allowfullscreen>
                                                    </iframe>
                                                </div>
                                            </div>

                                            <!-- SUBMIT BUTTON -->
                                            <div class="row">
                                                <div class="col-lg-2 col-md-3"></div>
                                                <div class="col-md-9 col-lg-10 d-flex justify-content-end">
                                                    <button type="submit" class="btn btn-solid btn-success">
                                                        Save Video
                                                    </button>
                                                </div>
                                            </div>
                                        </form>


                                </div>

                                <!-- END BANNER -->
                                <div class="tab-pane fade" id="endbanner" role="tabpanel" aria-labelledby="pills-endbanner-tab">
                                <form method="POST" action="" enctype="multipart/form-data" class="theme-form theme-form-2 mega-form">
                                    {% csrf_token %}
                                    <input type="hidden" name="form_type" value="end_banner">



                                    <div class="card-header-1 mt-3">
                                        <h5>End Banner</h5>
                                    </div>

                                     <div class="row">
                                            <!-- SLIDER 1 -->
                                            <div class="mb-4 row align-items-center">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">Slider 1</label>
                                                <div class="col-md-9 col-lg-10">
                                                   <!-- END BANNER SLIDER 1 -->
                                                    <input class="form-control" type="file" accept="image/*" name="end_banners"
                                                        onchange="previewImage(this, 'end_preview1', 500)">
                                                    <img id="end_preview1" class="mt-2"
                                                        style="max-height:120px; display:none; border-radius:10px;">

                                                             <small class="text-muted">
                                                                Allowed formats: WebP, JPG, PNG | Ideal size: 200–500 KB | Max size: 1 MB | Dimension: 1344 × 768 px
                                                            </small>
                                                </div>
                                            </div>

                                            <!-- SLIDER 2 -->
                                            <div class="mb-4 row align-items-center">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">Slider 2</label>
                                                <div class="col-md-9 col-lg-10">
                                                    
                                                    <!-- SLIDER 2 -->
                                                    <input class="form-control" type="file" accept="image/*" name="end_banners"
                                                        onchange="previewImage(this, 'end_preview2', 500)">
                                                    <img id="end_preview2" class="mt-2"
                                                        style="max-height:120px; display:none; border-radius:10px;">
                                                            <small class="text-muted">
                                                                Allowed formats: WebP, JPG, PNG | Ideal size: 200–500 KB | Max size: 1 MB | Dimension: 1344 × 768 px
                                                            </small>
                                                </div>
                                            </div>

                                            <!-- SLIDER 3 -->
                                            <div class="mb-4 row align-items-center">
                                                <label class="form-label-title col-lg-2 col-md-3 mb-0">Slider 3</label>
                                                <div class="col-md-9 col-lg-10">
                                                    <!-- SLIDER 3 -->
                                                        <input class="form-control" type="file" accept="image/*" name="end_banners"
                                                            onchange="previewImage(this, 'end_preview3', 500)">
                                                        <img id="end_preview3" class="mt-2"
                                                            style="max-height:120px; display:none; border-radius:10px;">
                                                                Allowed formats: WebP, JPG, PNG | Ideal size: 200–500 KB | Max size: 1 MB | Dimension: 1344 × 768 px
                                                            </small>

                                                </div>
                                            </div>

                                            <!-- DYNAMIC SLIDERS (will appear BELOW Slider 3) -->
                                            <div id="end-extra-banners" class="col-12"></div>

                                            <!-- ACTION BUTTONS -->
                                            <div class="row mt-3">
                                                <div class="col-lg-2 col-md-3"></div>

                                                <div class="col-md-9 col-lg-10 d-flex justify-content-between">
                                                    <button type="button"
                                                        class="btn btn-outline-primary"
                                                        onclick="addEndBannerInput()">
                                                        + Add More Banner
                                                    </button>


                                                    <button type="submit"
                                                            class="btn btn-solid btn-success">
                                                        Save Sliders
                                                    </button>
                                                </div>
                                            </div>

                                    </div>
                                        </form>

                                    <div class="card-header-1">
                                        <h5>Uploaded End Banners</h5>
                                    </div>

                                    <div class="table-responsive">
                                        <table class="table all-package order-table theme-table" id="table_id">
                                            <thead>
                                                <tr>
                                                    <th>Banner</th>
                                                    <th>created at</th>
                                                    
                                                    <th>Option</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                               {% for banner in end_banners %}
                                                <tr>
                                                   <td>
                                                        <div class="table-image">
                                                                <img src="{{banner.image.url}}" class="img-fluid" alt="End Banner" style="height:70px; width:auto;">
                                                        </div>
                                                        </td>
                                                        <td>{{ banner.created_at|date:"d-m-Y" }}</td>
                                                  <td>
                                                            <ul>
                                                          

                                                                <li>
                                                                    <a href="javascript:void(0)">
                                                                        <i class="ri-pencil-line"></i>
                                                                    </a>
                                                                </li>

                                                                <li>
                                                                    <a href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#deleteSliderModal{{ banner.id }}">
                                                                        <i class="ri-delete-bin-line"></i>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                            <!-- delete modal -->
                                                            <div class="modal fade theme-modal remove-coupon" id="deleteSliderModal{{ banner.id }}" aria-hidden="true" tabindex="-1">
                                                                <div class="modal-dialog modal-dialog-centered">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header d-block text-center">
                                                                            <h5 class="modal-title w-100">Are You Sure ?</h5>
                                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <p>Do you really want to delete this banner"?</p>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-animation btn-md fw-bold" data-bs-dismiss="modal">No</button>
                                                                            <form method="post" action="{% url 'web:delete_end_banner' banner.id %}">
                                                                                {% csrf_token %}
                                                                                <button type="submit" class="btn btn-animation btn-md fw-bold">Yes</button>
                                                                            </form>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                </tr>
                                               {% empty %}
                                                <tr>
                                                <td colspan="3" class="text-center text-muted">
                                                No banners uploaded yet
                                                </td>
                                                </tr>
                                                {% endfor %}
                                                                                                
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- FLASH NEWS -->
                                <div class="tab-pane fade" id="flashnews" role="tabpanel"
                                    aria-labelledby="pills-flashnews-tab">

                                 

                                  <form method="POST" action="" class="theme-form theme-form-2 mega-form">
                                    {% csrf_token %}
                                    <input type="hidden" name="form_type" value="flash_news">
                                    <div class="card-header-1 mt-3">
                                        <h5>Flash News</h5>
                                    </div>

                                    <!-- FLASH NEWS LIST -->
                                    <div id="flash-news-wrapper">

                                        <!-- FLASH NEWS 1 -->
                                        <div class="mb-4 row align-items-center flash-news-item">
                                            <label class="form-label-title col-lg-2 col-md-3 mb-0">
                                                Flash News 1
                                            </label>
                                            <div class="col-md-9 col-lg-10 d-flex gap-2">
                                                <input type="text"
                                                    class="form-control"
                                                    name="flash_news[]"
                                                    placeholder="Enter flash news text"
                                                    maxlength="150">
                                            </div>
                                        </div>

                                    </div>

                                    <!-- ACTION BUTTONS -->
                                    <div class="row">
                                        <div class="col-lg-2 col-md-3"></div>
                                        <div class="col-md-9 col-lg-10 d-flex justify-content-between">
                                            <button type="button"
                                                    class="btn btn-outline-primary"
                                                    onclick="addFlashNews()">
                                                + Add More Flash News
                                            </button>

                                            <button type="submit"
                                                    class="btn btn-solid btn-success">
                                                Save Flash News
                                            </button>
                                        </div>
                                    </div>
                                </form>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



{% block extra_js %}
<!-- Dropzone js -->
<script src="{% static 'adminpanel/js/dropzone/dropzone.js' %}"></script>
<script src="{% static 'adminpanel/js/dropzone/dropzone-script.js' %}"></script>

<!-- Select2 js -->
<script src="{% static 'adminpanel/js/select2.min.js' %}"></script>
<script src="{% static 'adminpanel/js/select2-custom.js' %}"></script>
<script>
/* ---------- IMAGE PREVIEW + SIZE CHECK ---------- */
function setDeleteUrl(url){
    document.getElementById("confirmDeleteBtn").href = url;
}
function previewImage(input, previewId, maxSizeKB = 500, reqWidth = null, reqHeight = null) {
    const file = input.files[0];
    if (!file) return;

    // Size validation
    const sizeKB = file.size / 1024;
    if (sizeKB > maxSizeKB) {
        alert(`File size must be less than ${maxSizeKB} KB`);
        input.value = "";
        return;
    }

    const reader = new FileReader();
    reader.onload = function (e) {
        const img = new Image();
        img.src = e.target.result;

        img.onload = function () {
            // Dimension validation (if provided)
            if (reqWidth && reqHeight) {
                if (img.width !== reqWidth || img.height !== reqHeight) {
                    alert(`Image dimension must be ${reqWidth} x ${reqHeight}px`);
                    input.value = "";
                    return;
                }
            }

            const preview = document.getElementById(previewId);
            preview.src = e.target.result;
            preview.style.display = "block";
        };
    };
    reader.readAsDataURL(file);
}
</script>
<script>
let bannerCount = 3;

function addBannerInput() {
    bannerCount++;

    const container = document.getElementById("extra-banners");

    const div = document.createElement("div");
    div.className = "mb-4 row align-items-center";

    const previewId = `preview_dynamic_${bannerCount}`;

    div.innerHTML = `
        <label class="form-label-title col-lg-2 col-md-3 mb-0">
            Slider ${bannerCount}
        </label>
        <div class="col-md-9 col-lg-10">
            <input class="form-control" type="file" accept="image/*" name="sliders"
                onchange="previewImage(this, '${previewId}', 500)">
            <img id="${previewId}" class="mt-2"
                style="max-height:120px; display:none; border-radius:10px;">
        </div>
    `;

    container.appendChild(div);
}
</script>
<script>
function validateBanner(input, previewId, width, height) {
    previewImage(input, previewId, 500, width, height);
}
</script>
<script>
function toggleVideoType() {
    const uploadBox = document.getElementById("uploadVideoBox");
    const youtubeBox = document.getElementById("youtubeVideoBox");

    const uploadRadio = document.getElementById("video_upload");

    if (uploadRadio.checked) {
        uploadBox.classList.remove("d-none");
        youtubeBox.classList.add("d-none");
    } else {
        uploadBox.classList.add("d-none");
        youtubeBox.classList.remove("d-none");
    }
}

/* ---------- VIDEO FILE VALIDATION ---------- */
function validateVideo(input, previewId) {
    const file = input.files[0];
    if (!file) return;

    const sizeMB = file.size / (1024 * 1024);
    if (sizeMB > 10) {
        alert("Video must be less than 10 MB");
        input.value = "";
        return;
    }

    const video = document.getElementById(previewId);
    video.src = URL.createObjectURL(file);
    video.style.display = "block";
}

/* ---------- YOUTUBE PREVIEW ---------- */
function previewYoutube(url) {
    let videoId = "";

    if (url.includes("watch?v=")) {
        videoId = url.split("watch?v=")[1].split("&")[0];
    } else if (url.includes("youtu.be/")) {
        videoId = url.split("youtu.be/")[1];
    }

    if (videoId) {
        const iframe = document.getElementById("youtubePreview");
        iframe.src = `https://www.youtube.com/embed/${videoId}`;
        iframe.style.display = "block";
    }
}
</script>
<script>
let flashCount = 1;

function addFlashNews() {
    flashCount++;

    const wrapper = document.getElementById("flash-news-wrapper");

    const div = document.createElement("div");
    div.className = "mb-4 row align-items-center flash-news-item";

    div.innerHTML = `
        <label class="form-label-title col-lg-2 col-md-3 mb-0">
            Flash News ${flashCount}
        </label>
        <div class="col-md-9 col-lg-10">
            <input type="text"
                class="form-control"
                name="flash_news[]"
                maxlength="150"
                placeholder="Enter flash news text">
        </div>
    `;

    wrapper.appendChild(div);
}
</script>
<script>
let endBannerCount = 3;

function addEndBannerInput() {
    endBannerCount++;

    const container = document.getElementById("end-extra-banners");
    const previewId = `end_preview_dynamic_${endBannerCount}`;

    const div = document.createElement("div");
    div.className = "mb-4 row align-items-center";

    div.innerHTML = `
        <label class="form-label-title col-lg-2 col-md-3 mb-0">
            Slider ${endBannerCount}
        </label>
        <div class="col-md-9 col-lg-10">
            <input class="form-control" type="file" accept="image/*" name="end_banners"
                onchange="previewImage(this, '${previewId}', 500)">
            <img id="${previewId}" class="mt-2"
                style="max-height:120px; display:none; border-radius:10px;">
        </div>
    `;

    container.appendChild(div);
}
</script>




{% endblock %}


<!-- New Product Add End -->
{% endblock %}